{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/Desktop/wings cafe 2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import'../styles/Inventory.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const backendURL=\"http://localhost:5000\";function Inventory(){const[products,setProducts]=useState([]);const[stockTransactions,setStockTransactions]=useState([]);const[stockInputs,setStockInputs]=useState({});const fetchData=async()=>{try{const resProducts=await fetch(\"\".concat(backendURL,\"/products\"));const dataProducts=await resProducts.json();setProducts(dataProducts);const resStock=await fetch(\"\".concat(backendURL,\"/stock-transactions\"));const dataStock=await resStock.json();setStockTransactions(dataStock);}catch(err){console.error(\"Error fetching data:\",err);}};useEffect(()=>{fetchData();},[]);const handleStockChange=(productId,value)=>{setStockInputs(_objectSpread(_objectSpread({},stockInputs),{},{[productId]:value}));};const addStock=async productId=>{const quantity=Number(stockInputs[productId]);if(!quantity||quantity<=0)return alert(\"Enter a valid quantity\");try{const res=await fetch(\"\".concat(backendURL,\"/products/\").concat(productId,\"/add-stock\"),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({quantity})});const data=await res.json();if(res.ok){fetchData();// refresh products and stock transactions\nsetStockInputs(_objectSpread(_objectSpread({},stockInputs),{},{[productId]:\"\"}));// clear input\n}else{alert(data.error||\"Failed to add stock\");}}catch(err){console.error(err);alert(\"Server error\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"inventory\",style:{padding:\"20px\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Inventory\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"inventory-table\",border:\"1\",cellPadding:\"10\",style:{width:\"100%\",marginBottom:\"40px\",borderCollapse:\"collapse\"},children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:\"#ffe4e1\"},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Add Stock\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map(product=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product.name}),/*#__PURE__*/_jsxs(\"td\",{children:[\"R \",Number(product.price).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:product.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:stockInputs[product.id]||\"\",onChange:e=>handleStockChange(product.id,e.target.value),style:{width:\"80px\",marginRight:\"5px\"}}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>addStock(product.id),children:\"Add\"})]})]},product.id))})]}),/*#__PURE__*/_jsx(\"h2\",{children:\"Stock Additions History\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"stock-history-table\",border:\"1\",cellPadding:\"10\",style:{width:\"100%\",borderCollapse:\"collapse\"},children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:\"#ffe4e1\"},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity Added\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:stockTransactions.map(t=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:t.productName}),/*#__PURE__*/_jsx(\"td\",{children:t.quantity}),/*#__PURE__*/_jsx(\"td\",{children:new Date(t.date).toLocaleString()})]},t.id))})]})]});}export default Inventory;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","backendURL","Inventory","products","setProducts","stockTransactions","setStockTransactions","stockInputs","setStockInputs","fetchData","resProducts","fetch","concat","dataProducts","json","resStock","dataStock","err","console","error","handleStockChange","productId","value","_objectSpread","addStock","quantity","Number","alert","res","method","headers","body","JSON","stringify","data","ok","className","style","padding","children","border","cellPadding","width","marginBottom","borderCollapse","backgroundColor","map","product","name","price","toFixed","type","min","id","onChange","e","target","marginRight","onClick","t","productName","Date","date","toLocaleString"],"sources":["C:/Users/USER/Desktop/wings cafe 2/frontend/src/components/Inventory.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport '../styles/Inventory.css';\r\n\r\nconst backendURL = \"http://localhost:5000\";\r\n\r\nfunction Inventory() {\r\n  const [products, setProducts] = useState([]);\r\n  const [stockTransactions, setStockTransactions] = useState([]);\r\n  const [stockInputs, setStockInputs] = useState({});\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      const resProducts = await fetch(`${backendURL}/products`);\r\n      const dataProducts = await resProducts.json();\r\n      setProducts(dataProducts);\r\n\r\n      const resStock = await fetch(`${backendURL}/stock-transactions`);\r\n      const dataStock = await resStock.json();\r\n      setStockTransactions(dataStock);\r\n    } catch (err) {\r\n      console.error(\"Error fetching data:\", err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchData();\r\n  }, []);\r\n\r\n  const handleStockChange = (productId, value) => {\r\n    setStockInputs({\r\n      ...stockInputs,\r\n      [productId]: value\r\n    });\r\n  };\r\n\r\n  const addStock = async (productId) => {\r\n    const quantity = Number(stockInputs[productId]);\r\n    if (!quantity || quantity <= 0) return alert(\"Enter a valid quantity\");\r\n\r\n    try {\r\n      const res = await fetch(`${backendURL}/products/${productId}/add-stock`, {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ quantity })\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok) {\r\n        fetchData(); // refresh products and stock transactions\r\n        setStockInputs({ ...stockInputs, [productId]: \"\" }); // clear input\r\n      } else {\r\n        alert(data.error || \"Failed to add stock\");\r\n      }\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Server error\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"inventory\" style={{ padding: \"20px\" }}>\r\n      <h1>Inventory</h1>\r\n\r\n      {/* Products Table */}\r\n      <table className=\"inventory-table\" border=\"1\" cellPadding=\"10\" style={{ width: \"100%\", marginBottom: \"40px\", borderCollapse: \"collapse\" }}>\r\n        <thead style={{ backgroundColor: \"#ffe4e1\" }}>\r\n          <tr>\r\n            <th>Product</th>\r\n            <th>Price</th>\r\n            <th>Quantity</th>\r\n            <th>Add Stock</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {products.map((product) => (\r\n            <tr key={product.id}>\r\n              <td>{product.name}</td>\r\n                <td>R {Number(product.price).toFixed(2)}</td>\r\n              <td>{product.quantity}</td>\r\n              <td>\r\n                <input\r\n                  type=\"number\"\r\n                  min=\"1\"\r\n                  value={stockInputs[product.id] || \"\"}\r\n                  onChange={(e) => handleStockChange(product.id, e.target.value)}\r\n                  style={{ width: \"80px\", marginRight: \"5px\" }}\r\n                />\r\n                <button onClick={() => addStock(product.id)}>Add</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n\r\n      {/* Stock Additions History */}\r\n      <h2>Stock Additions History</h2>\r\n      <table className=\"stock-history-table\" border=\"1\" cellPadding=\"10\" style={{ width: \"100%\", borderCollapse: \"collapse\" }}>\r\n        <thead style={{ backgroundColor: \"#ffe4e1\" }}>\r\n          <tr>\r\n            <th>Product</th>\r\n            <th>Quantity Added</th>\r\n            <th>Date</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {stockTransactions.map((t) => (\r\n            <tr key={t.id}>\r\n              <td>{t.productName}</td>\r\n              <td>{t.quantity}</td>\r\n              <td>{new Date(t.date).toLocaleString()}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Inventory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}