{"ast":null,"code":"import _objectSpread from\"C:/Users/USER/Desktop/wings cafe 2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const backendURL=\"http://localhost:5000\";function Sales(){const[products,setProducts]=useState([]);const[salesLog,setSalesLog]=useState([]);const[formData,setFormData]=useState({productId:\"\",quantity:\"\"});const[editingId,setEditingId]=useState(null);// Fetch products and sales\nconst fetchProducts=async()=>{const res=await fetch(\"\".concat(backendURL,\"/products\"));const data=await res.json();setProducts(data);};const fetchSales=async()=>{const res=await fetch(\"\".concat(backendURL,\"/sales\"));const data=await res.json();setSalesLog(data);};useEffect(()=>{fetchProducts();fetchSales();},[]);// Handle form input changes\nconst handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};// Add or update sale\nconst handleSubmit=async e=>{e.preventDefault();if(!formData.productId||!formData.quantity)return alert(\"Fill all fields\");if(editingId){// Update sale\nconst res=await fetch(\"\".concat(backendURL,\"/sales/\").concat(editingId),{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)});const result=await res.json();if(res.status!==200)return alert(result.error);}else{// Add sale\nconst res=await fetch(\"\".concat(backendURL,\"/sales\"),{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)});const result=await res.json();if(res.status!==200)return alert(result.error);}setFormData({productId:\"\",quantity:\"\"});setEditingId(null);fetchProducts();fetchSales();};// Edit sale\nconst handleEdit=sale=>{setFormData({productId:sale.productId,quantity:sale.quantity});setEditingId(sale.id);};// Delete sale\nconst handleDelete=async id=>{const res=await fetch(\"\".concat(backendURL,\"/sales/\").concat(id),{method:\"DELETE\"});const result=await res.json();if(res.status!==200)return alert(result.error);fetchProducts();fetchSales();};return/*#__PURE__*/_jsxs(\"div\",{className:\"sales\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sales\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{marginBottom:\"20px\"},children:[/*#__PURE__*/_jsxs(\"select\",{name:\"productId\",value:formData.productId,onChange:handleChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Product\"}),products.map(p=>/*#__PURE__*/_jsxs(\"option\",{value:p.id,children:[p.name,\" (Stock: \",p.quantity,\")\"]},p.id))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"quantity\",placeholder:\"Quantity\",value:formData.quantity,onChange:handleChange,required:true,min:\"1\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:editingId?\"Update Sale\":\"Record Sale\"})]}),/*#__PURE__*/_jsxs(\"table\",{border:\"1\",cellPadding:\"10\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Product\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:salesLog.map(sale=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:sale.productName}),/*#__PURE__*/_jsx(\"td\",{children:sale.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"R \",Number(sale.price).toFixed(2)]}),/*#__PURE__*/_jsx(\"td\",{children:(sale.price*sale.quantity).toFixed(2)}),/*#__PURE__*/_jsx(\"td\",{children:new Date(sale.date).toLocaleString()}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEdit(sale),children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(sale.id),children:\"Delete\"})]})]},sale.id))})]})]});}export default Sales;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","backendURL","Sales","products","setProducts","salesLog","setSalesLog","formData","setFormData","productId","quantity","editingId","setEditingId","fetchProducts","res","fetch","concat","data","json","fetchSales","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","alert","method","headers","body","JSON","stringify","result","status","error","handleEdit","sale","id","handleDelete","className","children","onSubmit","style","marginBottom","onChange","required","map","p","type","placeholder","min","border","cellPadding","productName","Number","price","toFixed","Date","date","toLocaleString","onClick"],"sources":["C:/Users/USER/Desktop/wings cafe 2/frontend/src/components/Sales.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\nconst backendURL = \"http://localhost:5000\";\r\n\r\nfunction Sales() {\r\n  const [products, setProducts] = useState([]);\r\n  const [salesLog, setSalesLog] = useState([]);\r\n  const [formData, setFormData] = useState({\r\n    productId: \"\",\r\n    quantity: \"\",\r\n  });\r\n  const [editingId, setEditingId] = useState(null);\r\n\r\n  // Fetch products and sales\r\n  const fetchProducts = async () => {\r\n    const res = await fetch(`${backendURL}/products`);\r\n    const data = await res.json();\r\n    setProducts(data);\r\n  };\r\n\r\n  const fetchSales = async () => {\r\n    const res = await fetch(`${backendURL}/sales`);\r\n    const data = await res.json();\r\n    setSalesLog(data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n    fetchSales();\r\n  }, []);\r\n\r\n  // Handle form input changes\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // Add or update sale\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!formData.productId || !formData.quantity) return alert(\"Fill all fields\");\r\n\r\n    if (editingId) {\r\n      // Update sale\r\n      const res = await fetch(`${backendURL}/sales/${editingId}`, {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n      const result = await res.json();\r\n      if (res.status !== 200) return alert(result.error);\r\n    } else {\r\n      // Add sale\r\n      const res = await fetch(`${backendURL}/sales`, {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(formData),\r\n      });\r\n      const result = await res.json();\r\n      if (res.status !== 200) return alert(result.error);\r\n    }\r\n\r\n    setFormData({ productId: \"\", quantity: \"\" });\r\n    setEditingId(null);\r\n    fetchProducts();\r\n    fetchSales();\r\n  };\r\n\r\n  // Edit sale\r\n  const handleEdit = (sale) => {\r\n    setFormData({\r\n      productId: sale.productId,\r\n      quantity: sale.quantity,\r\n    });\r\n    setEditingId(sale.id);\r\n  };\r\n\r\n  // Delete sale\r\n  const handleDelete = async (id) => {\r\n    const res = await fetch(`${backendURL}/sales/${id}`, { method: \"DELETE\" });\r\n    const result = await res.json();\r\n    if (res.status !== 200) return alert(result.error);\r\n    fetchProducts();\r\n    fetchSales();\r\n  };\r\n\r\n  return (\r\n    <div className=\"sales\">\r\n      <h1>Sales</h1>\r\n\r\n      <form onSubmit={handleSubmit} style={{ marginBottom: \"20px\" }}>\r\n        <select\r\n          name=\"productId\"\r\n          value={formData.productId}\r\n          onChange={handleChange}\r\n          required\r\n        >\r\n          <option value=\"\">Select Product</option>\r\n          {products.map((p) => (\r\n            <option key={p.id} value={p.id}>\r\n              {p.name} (Stock: {p.quantity})\r\n            </option>\r\n          ))}\r\n        </select>\r\n        <input\r\n          type=\"number\"\r\n          name=\"quantity\"\r\n          placeholder=\"Quantity\"\r\n          value={formData.quantity}\r\n          onChange={handleChange}\r\n          required\r\n          min=\"1\"\r\n        />\r\n        <button type=\"submit\">{editingId ? \"Update Sale\" : \"Record Sale\"}</button>\r\n      </form>\r\n\r\n      <table border=\"1\" cellPadding=\"10\">\r\n        <thead>\r\n          <tr>\r\n            <th>Product</th>\r\n            <th>Quantity</th>\r\n            <th>Price</th>\r\n            <th>Total</th>\r\n            <th>Date</th>\r\n            <th>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {salesLog.map((sale) => (\r\n            <tr key={sale.id}>\r\n              <td>{sale.productName}</td>\r\n              <td>{sale.quantity}</td>\r\n                  <td>R {Number(sale.price).toFixed(2)}</td>\r\n              <td>{(sale.price * sale.quantity).toFixed(2)}</td>\r\n              <td>{new Date(sale.date).toLocaleString()}</td>\r\n              <td>\r\n                <button onClick={() => handleEdit(sale)}>Edit</button>\r\n                <button onClick={() => handleDelete(sale.id)}>Delete</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Sales;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}